<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

    <!-- Fuente Pacifico -->
    <link href="https://fonts.googleapis.com/css?family=Pacifico&display=swap" rel="stylesheet">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mil Sabores</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    
    <!-- CSS personalizado -->
    <link rel="stylesheet" href="../assets/css/productos.css" />
    <link rel="stylesheet" href="../assets/css/carrito.css" />
</head>
<body style="background-color: #fff5e1">
    <header class="topbar">
        <div class="logo">
            <img src="../assets/img/logo.png" alt="Logo Mil Sabores" />
        </div>
            <div>
                <strong><span style="font-family: 'Pacifico', cursive;">Tienda online - Mil Sabores</span></strong>
        </div>
        <nav class="navegacion" aria-label="Navegaci칩n principal">
            <a href="/index.html">P치gina Principal</a>
            <a href="/src/tienda/productos.html">Productos</a>
            <a href="nosotros.html">Nosotros</a>
            <a href="/src/tienda/blogs.html">Blog</a>
            <a href="/src/tienda/contacto.html">Contacto</a>
            <a href="/src/tienda/carrito.html" id="cart-button" class="btn btn-acento">
                Carrito <i class="bi bi-cart3"></i> (<span id="cart-count">0</span>)
            </a>
        </nav>
        <div class="usuario">
            <span class="separar">|</span>
            <a href="iniciarSesion.html">Iniciar sesi칩n</a>
            <span class="separar">|</span>
            <a href="registro.html">Registrarse</a>
            <span class="separar">|</span>
            <div id="usuario-info" style="margin-left:8px; font-weight:600; color:#8B4513; display:flex; flex-direction:column; align-items:flex-start; gap:2px;"></div>
        </div>
    </header>

    <main>
        <div class="titulo-productos">
            <h1 style="font-family: 'Pacifico', cursive; color: #8B4513;">Productos</h1>
        </div>
        <div id="productos-grid" class="productos-grid"></div>
    </main>

    <!-- Bootstrap JS -->
    <script>
    function pintarUsuarioHeader(){
        const userDiv = document.getElementById('usuario-info');
        if (!userDiv) return;
        let sesion = null;
        const rawLocal = localStorage.getItem('sesionActiva');
        const rawSession = sessionStorage.getItem('sesionActiva');
        if (rawLocal) sesion = JSON.parse(rawLocal);
        else if (rawSession) sesion = JSON.parse(rawSession);
        if (sesion && sesion.nombre) {
            userDiv.innerHTML = `<span style=\"color:#8B4513;font-weight:600;margin-bottom:2px;\">Hola, ${sesion.nombre}</span><button onclick=\"cerrarSesion()\" style=\"background:#8B4513;color:#fff;border:none;border-radius:6px;padding:4px 14px;cursor:pointer;font-weight:600;transition:background 0.2s;\">Cerrar sesi칩n</button>`;
        } else {
            userDiv.innerHTML = '';
        }
    }
    function cerrarSesion() {
        localStorage.removeItem('sesionActiva');
        localStorage.removeItem('recordarSesion');
        sessionStorage.removeItem('sesionActiva');
        window.location.href = '../../index.html';
    }
    window.addEventListener('DOMContentLoaded', pintarUsuarioHeader);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- IMPORTANTE: Cargar carrito.js ANTES que productos.js -->
    <script src="../assets/js/carrito.js"></script>
    <script src="../assets/js/productos.js"></script>
</body>
</html>