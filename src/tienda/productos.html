<!DOCTYPE html>
<html lang="es">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Mil Sabores</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="../assets/css/styles.css" />
        <link rel="stylesheet" href="../assets/css/carrito.css" />
        <link rel="stylesheet" href="../assets/css/styles2.css" />
        <link rel="stylesheet" href="../assets/css/productos.css" />
        <link href="https://fonts.googleapis.com/css?family=Lato:400,700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Pacifico&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
        <style>
            body {
                background: #FFF5E1;
                color: #8B4513;
            }
            .text-principal { color: #8B4513 !important; }
            .text-secundario { color: #B0BEC5 !important; }
        </style>
</head>
<body style="background: #FFF5E1; font-family: 'Lato', 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;">
    <header class="topbar">
        <div class="logo">
            <img src="../assets/img/logo.png" alt="Logo Mil Sabores" />
        </div>
            <div>
                <strong><span style="font-family: 'Pacifico', cursive;">Tienda online - Mil Sabores</span></strong>
        </div>
        <nav class="navegacion" aria-label="Navegación principal">
            <a href="/index.html">Página Principal</a>
            <a href="/src/tienda/productos.html">Productos</a>
            <a href="nosotros.html">Nosotros</a>
            <a href="/src/tienda/blogs.html">Blog</a>
            <a href="/src/tienda/contacto.html">Contacto</a>
            <a href="/src/tienda/carrito.html" id="cart-button" class="btn btn-acento">
                Carrito <i class="bi bi-cart3"></i> (<span id="cart-count">0</span>)
            </a>
        </nav>
        <div class="usuario">
            <span class="separar">|</span>
            <a href="iniciarSesion.html">Iniciar sesión</a>
            <span class="separar">|</span>
            <a href="registro.html">Registrarse</a>
            <span class="separar">|</span>
            <div id="usuario-info" style="margin-left:8px; font-weight:600; color:#8B4513; display:flex; flex-direction:column; align-items:flex-start; gap:2px;"></div>
        </div>
    </header>

    <main>
        <div class="titulo-productos">
            <h1 style="font-family: 'Pacifico', cursive; color: #8B4513;">Productos</h1>
        </div>
        <div id="productos-grid" class="productos-grid"></div>
    </main>

    <!-- Bootstrap JS -->
    <script>
    function pintarUsuarioHeader(){
        const userDiv = document.getElementById('usuario-info');
        if (!userDiv) return;
        let sesion = null;
        const rawLocal = localStorage.getItem('sesionActiva');
        const rawSession = sessionStorage.getItem('sesionActiva');
        if (rawLocal) sesion = JSON.parse(rawLocal);
        else if (rawSession) sesion = JSON.parse(rawSession);
        if (sesion && sesion.nombre) {
            userDiv.innerHTML = `<span style=\"color:#8B4513;font-weight:600;margin-bottom:2px;\">Hola, ${sesion.nombre}</span><button onclick=\"cerrarSesion()\" style=\"background:#8B4513;color:#fff;border:none;border-radius:6px;padding:4px 14px;cursor:pointer;font-weight:600;transition:background 0.2s;\">Cerrar sesión</button>`;
        } else {
            userDiv.innerHTML = '';
        }
    }
    function cerrarSesion() {
        localStorage.removeItem('sesionActiva');
        localStorage.removeItem('recordarSesion');
        sessionStorage.removeItem('sesionActiva');
        window.location.href = '../../index.html';
    }
    window.addEventListener('DOMContentLoaded', pintarUsuarioHeader);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- IMPORTANTE: Cargar carrito.js ANTES que productos.js -->
    <script src="../assets/js/carrito.js"></script>
    <script src="../assets/js/productos.js"></script>
</body>
    <!-- ======================= FOOTER ======================= -->
    <footer class="footer" id="contacto" style="background: #fff8f0; border-top: 2px solid #ffe4ec; margin-top: 40px; padding: 32px 0 18px 0; font-family: 'Lato', 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;">
        <nav aria-label="Redes" style="text-align: center; margin-bottom: 10px;">
            <a href="#" style="color: #8B4513; font-weight: 600; font-size: 1.1rem;">X</a> ·
            <a href="#" id="blog" style="color: #8B4513; font-weight: 600; font-size: 1.1rem;">Instagram</a> ·
            <a href="#" style="color: #8B4513; font-weight: 600; font-size: 1.1rem;">WhatsApp</a>
        </nav>
        <form class="newsletter" action="#" method="post" style="display: flex; flex-direction: column; align-items: center; gap: 8px; max-width: 340px; margin: 0 auto;">
            <label for="email" style="color: #8B4513; font-weight: 600; font-size: 1rem;">Suscríbete a nuestro newsletter</label>
            <input id="email" name="email" type="email" placeholder="tucorreo@ejemplo.com" style="border-radius: 8px; border: 1.5px solid #ffe4ec; padding: 8px 12px; background: #fff8f0; font-size: 1rem; width: 100%;" />
            <button type="submit" style="background: linear-gradient(90deg, #FFC0CB 0%, #FFF5E1 100%); color: #8B4513; font-weight: 700; border-radius: 8px; border: none; padding: 8px 18px; font-size: 1rem; margin-top: 2px; font-family: 'Lato', sans-serif; width: 100%;">Suscribirse</button>
        </form>
    </footer>
</body>
</html>